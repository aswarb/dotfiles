// ===============================
// Base palette (warm, opaque)
// ===============================
$warm-darkest: rgba(#1a1614, 1);
$warm-darker:  rgba(#2a2421, 1);
$warm-dark:    rgba(#3d3935, 1);
$warm-mid:     rgba(#8a8479, 1);
$warm-light:   rgba(#cdc6bc, 1);
$warm-lighter: rgba(#ebe6e0, 1);
$warm-white:   rgba(#faf7f2, 1);

// Accents
$accent-peach:   rgba(#edc99a, 1);
$accent-coral:   rgba(#e07860, 1);
$accent-apricot: rgba(#d4a574, 1);
$accent-cherry:  rgba(#c85a5a, 1);

// ===============================
// Semantic roles
// ===============================

// Glass layers anchored to dark for translucency
$glass-container: rgba(20, 22, 24, 0.75);
$glass-hover:     rgba(235, 235, 235, 0.08);
$glass-active:    rgba(0, 0, 0, 0.45);

// Text
$text-primary:   $warm-white;
$text-secondary: $warm-lighter;
$text-muted:     rgba($warm-light, 0.85);
$text-accent:    $accent-peach;
$text-error:     $accent-cherry;

// Typography
$font-family: 'BlexMono Nerd Font', monospace;
$border-radius: 0.15em;

// ===============================
// Reset
// ===============================
* {
  all: unset;
  transition:
    background-color 0.09s cubic-bezier(0.4, 0.0, 0.2, 1),
    color 0.09s cubic-bezier(0.4, 0.0, 0.2, 1),
    box-shadow 0.09s cubic-bezier(0.4, 0.0, 0.2, 1);
}

.mono { font-family: $font-family; }
.italic { font-style: italic; }

// ===============================
// Bar
// ===============================
.bar {
  background-color: transparent; // fully transparent
  color: $text-primary;
  font-family: $font-family;

  .container {
    margin: 1px 0;
    padding: 2px 6px;
    border-radius: $border-radius;
    background-color: $glass-container; // container carries the color
    box-shadow: inset 0 0 0 1px rgba($warm-white, 0.05);

    button.container {
      background-color: transparent; // container itself is interactive
      padding: 2px 6px;
      border-radius: $border-radius;

      &:hover {
        background-color: $glass-hover;
        box-shadow: inset 0 0 0 1px rgba($warm-white, 0.08);
      }

      &:active {
        background-color: $glass-active;
        box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.35);
      }
    }
  }
}

// ===============================
// Workspaces
// ===============================
.workspaces {
  button {
    padding: 2px 8px 0 8px; // pull underline to container edge
    font-size: 14px;
    font-family: $font-family;
    color: $text-muted;
    background: none;
    border: none;
    border-bottom: 2px solid transparent;

    &:hover {
      color: $text-primary;
      background-color: $glass-hover;
    }

    &.active {
      color: $text-accent;
      border-bottom-color: $accent-peach;
    }

    &.focused {
      color: $text-primary;
      border-bottom-color: rgba($warm-light, 0.6);
    }
  }
}

// ===============================
// Systray
// ===============================
.systray {
  image {
    margin: 0 4px;
    opacity: 0.85;

    &:hover {
      opacity: 1;
      background-color: $glass-hover;
      border-radius: $border-radius;
    }
  }

  .popup,
  menu {
    padding: 4px;
    background-color: $glass-container;
    border-radius: $border-radius;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.65);

    > menuitem {
      padding: 5px 10px;
      border-radius: $border-radius;
      font-family: $font-family;
      font-size: 13px;
      color: $text-secondary;

      &:hover {
        background-color: $glass-hover;
        color: $text-primary;
      }

      &:disabled {
        color: $text-muted;
        opacity: 0.55;
        font-style: italic;
      }

      arrow {
        min-width: 12px;
        min-height: 12px;

        &:dir(ltr) {
          -gtk-icon-source: -gtk-icontheme("pan-end-symbolic");
          margin: 0 8px;
        }
      }
    }

    separator {
      margin: 4px 6px;
      min-height: 1px;
      background-color: rgba(255, 255, 255, 0.08);
    }
  }
}

// ===============================
// Errors
// ===============================
.error {
  color: $text-error;
}

